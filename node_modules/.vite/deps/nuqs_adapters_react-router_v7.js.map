{
  "version": 3,
  "sources": ["../../.pnpm/nuqs@2.4.1_react-router@7.5.0_react-dom@18.3.1_react@18.3.1__react@18.3.1__react@18.3.1/node_modules/nuqs/dist/chunk-TCMXVJZC.js", "../../.pnpm/nuqs@2.4.1_react-router@7.5.0_react-dom@18.3.1_react@18.3.1__react@18.3.1__react@18.3.1/node_modules/nuqs/dist/chunk-AAU4ZYLC.js", "../../.pnpm/nuqs@2.4.1_react-router@7.5.0_react-dom@18.3.1_react@18.3.1__react@18.3.1__react@18.3.1/node_modules/nuqs/dist/adapters/react-router/v7.js"],
  "sourcesContent": ["import { error, debug } from './chunk-5WWTJYGR.js';\n\n// src/adapters/lib/patch-history.ts\nvar historyUpdateMarker = \"__nuqs__\";\nfunction getSearchParams(url) {\n  if (url instanceof URL) {\n    return url.searchParams;\n  }\n  if (url.startsWith(\"?\")) {\n    return new URLSearchParams(url);\n  }\n  try {\n    return new URL(url, location.origin).searchParams;\n  } catch {\n    return new URLSearchParams(url);\n  }\n}\nfunction patchHistory(emitter, adapter) {\n  if (typeof history === \"undefined\") {\n    return;\n  }\n  if (history.nuqs?.version && history.nuqs.version !== \"0.0.0-inject-version-here\") {\n    console.error(\n      error(409),\n      history.nuqs.version,\n      `0.0.0-inject-version-here`,\n      adapter\n    );\n    return;\n  }\n  if (history.nuqs?.adapters?.includes(adapter)) {\n    return;\n  }\n  let lastSearchSeen = typeof location === \"object\" ? location.search : \"\";\n  emitter.on(\"update\", (search) => {\n    const searchString = search.toString();\n    lastSearchSeen = searchString.length ? \"?\" + searchString : \"\";\n  });\n  debug(\n    \"[nuqs %s] Patching history (%s adapter)\",\n    \"0.0.0-inject-version-here\",\n    adapter\n  );\n  function sync(url) {\n    try {\n      const newSearch = new URL(url, location.origin).search;\n      if (newSearch === lastSearchSeen) {\n        return;\n      }\n    } catch {\n    }\n    try {\n      emitter.emit(\"update\", getSearchParams(url));\n    } catch (e) {\n      console.error(e);\n    }\n  }\n  const originalPushState = history.pushState;\n  const originalReplaceState = history.replaceState;\n  history.pushState = function nuqs_pushState(state, marker, url) {\n    originalPushState.call(history, state, \"\", url);\n    if (url && marker !== historyUpdateMarker) {\n      sync(url);\n    }\n  };\n  history.replaceState = function nuqs_replaceState(state, marker, url) {\n    originalReplaceState.call(history, state, \"\", url);\n    if (url && marker !== historyUpdateMarker) {\n      sync(url);\n    }\n  };\n  history.nuqs = history.nuqs ?? {\n    // This will be replaced by the prepack script\n    version: \"0.0.0-inject-version-here\",\n    adapters: []\n  };\n  history.nuqs.adapters.push(adapter);\n}\n\nexport { historyUpdateMarker, patchHistory };\n", "import { patchHistory, historyUpdateMarker } from './chunk-TCMXVJZC.js';\nimport { createAdapterProvider, renderQueryString } from './chunk-5WWTJYGR.js';\nimport mitt from 'mitt';\nimport { useCallback, startTransition, useState, useEffect } from 'react';\n\nfunction createReactRouterBasedAdapter({\n  adapter,\n  useNavigate,\n  useSearchParams\n}) {\n  const emitter = mitt();\n  function useNuqsReactRouterBasedAdapter() {\n    const navigate = useNavigate();\n    const searchParams = useOptimisticSearchParams();\n    const updateUrl = useCallback(\n      (search, options) => {\n        startTransition(() => {\n          emitter.emit(\"update\", search);\n        });\n        const url = new URL(location.href);\n        url.search = renderQueryString(search);\n        const updateMethod = options.history === \"push\" ? history.pushState : history.replaceState;\n        updateMethod.call(\n          history,\n          history.state,\n          // Maintain the history state\n          historyUpdateMarker,\n          url\n        );\n        if (options.shallow === false) {\n          navigate(\n            {\n              // Somehow passing the full URL object here strips the search params\n              // when accessing the request.url in loaders.\n              hash: url.hash,\n              search: url.search\n            },\n            {\n              replace: true,\n              preventScrollReset: true,\n              state: history.state?.usr\n            }\n          );\n        }\n        if (options.scroll) {\n          window.scrollTo(0, 0);\n        }\n      },\n      [navigate]\n    );\n    return {\n      searchParams,\n      updateUrl\n    };\n  }\n  function useOptimisticSearchParams() {\n    const [serverSearchParams] = useSearchParams(\n      // Note: this will only be taken into account the first time the hook is called,\n      // and cached for subsequent calls, causing problems when mounting components\n      // after shallow updates have occurred.\n      typeof location === \"undefined\" ? new URLSearchParams() : new URLSearchParams(location.search)\n    );\n    const [searchParams, setSearchParams] = useState(() => {\n      if (typeof location === \"undefined\") {\n        return serverSearchParams;\n      }\n      return new URLSearchParams(location.search);\n    });\n    useEffect(() => {\n      function onPopState() {\n        setSearchParams(new URLSearchParams(location.search));\n      }\n      function onEmitterUpdate(search) {\n        setSearchParams(search);\n      }\n      emitter.on(\"update\", onEmitterUpdate);\n      window.addEventListener(\"popstate\", onPopState);\n      return () => {\n        emitter.off(\"update\", onEmitterUpdate);\n        window.removeEventListener(\"popstate\", onPopState);\n      };\n    }, []);\n    return searchParams;\n  }\n  patchHistory(emitter, adapter);\n  return {\n    NuqsAdapter: createAdapterProvider(useNuqsReactRouterBasedAdapter),\n    useOptimisticSearchParams\n  };\n}\n\nexport { createReactRouterBasedAdapter };\n", "'use client';\n\nimport { createReactRouterBasedAdapter } from '../../chunk-AAU4ZYLC.js';\nimport '../../chunk-TCMXVJZC.js';\nimport '../../chunk-5WWTJYGR.js';\nimport { useSearchParams, useNavigate } from 'react-router';\n\nvar { NuqsAdapter, useOptimisticSearchParams } = createReactRouterBasedAdapter({\n  adapter: \"react-router-v7\",\n  useNavigate,\n  useSearchParams\n});\n\nexport { NuqsAdapter, useOptimisticSearchParams };\n"],
  "mappings": "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",
  "names": ["useNavigate", "useSearchParams", "useOptimisticSearchParams"]
}
